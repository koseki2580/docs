---
title: 平成28年
sidebar_label: 平成28年
draft: true
toc_max_heading_level: 5
tags: [データベース, 資格, データベーススペシャリスト, 午後1, 午後2]
---

```mdx-code-block
import UnderLine from "@site/src/components/Custom/UnderLine"
import FontColor from "@site/src/components/Custom/FontColor"

```

:::caution 注意事項
一個人の解答からここが根拠だろうという部分を取り出してまとめたものになります。
:::
以下の写真は全て実際の問題よりスクリーンショットで取得したものを表示させています。
また、「」内の文字は問題からそのまま引用しています。

## 午後 1

出典 : 平成 28 年度 春期 データベーススペシャリスト試験　午後 1

[問題](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2016h28_1/2016h28h_db_pm1_qs.pdf)

[解答](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2016h28_1/2016h28h_db_pm1_ans.pdf)

問題と解答は上記からダウンロードすることができます。

解答作成中

## 午後 2

出典 : 平成 28 年度 春期 データベーススペシャリスト試験　午後 2

[問題](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2016h28_1/2016h28h_db_pm2_qs.pdf)

[解答](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2016h28_1/2016h28h_db_pm2_ans.pdf)

問題と解答は上記からダウンロードすることができます。

### 大問 1

#### 設問 1

##### (1)

![午後2 設問1 表4](/img/png/Database/database-specialist/H28/2-1-chart-4.png "午後2 設問1 表4")

![午後2 設問1 表1](/img/png/Database/database-specialist/H28/2-1-chart-1.png "午後2 設問1 表1")

![午後2 設問1 表2](/img/png/Database/database-specialist/H28/2-1-chart-2.png "午後2 設問1 表2")

**前提条件**

ページ 11 $>$ 1, テーブル定義 $>$ (1) $>$ $\textcircled{\scriptsize 4}$に「日付、時刻、時刻印の列は、専用のデータ型を選択する。」と書かれているので、
`日付`, `時刻`, `時刻印`の列にはそれぞれに対応する専用の型を適応する。

ページ 11 $>$ 1. テーブル定義 $>$ (1) $>$ $\textcircled{\scriptsize 2}$, $\textcircled{\scriptsize 3}$に
「数値の列が整数である場合は、取り得る値の範囲に応じて、SMALLINT 又は INTEGER を選択する。それ以外の場合は DECIMAL を選択する。」、
「$\textcircled{\scriptsize 1}$及び$\textcircled{\scriptsize 2}$どちらの場合も、列の取り得る値の範囲に従って、格納領域の長さが最小となるようにデータ型を選択する。」
と書かれているので、データ型は格納領域が最小となるように選択する。

ページ 10 $>$ (1)に「 $\sim$ NOT NULL 制約を指定しない列には、NULL かどうかを表す 1 バイトのフラグが付加される。」と書かれているので、
NOT NULL 制約が`Y`であれば 0 バイト、`N`であれば 1 バイトとして扱う。

ページ 11 $>$ 1, テーブル定義 $>$ (4) $>$ $\textcircled{\scriptsize 1}$, $\textcircled{\scriptsize 2}$に
索引の種類には、P(主キーの索引)、U(ユニーク索引), NU(非ユニーク索引)がある。」、「主キーの索引は、必ず作成する。」
と書かれているので、主キーには必ず索引を作成する。

ページ 11 $>$ 1, テーブル定義 $>$ (4) $>$ $\textcircled{\scriptsize 3}$に
「主キー以外で値が一意となる列又は列の組合せには、必ずユニーク索引を作成する。それ以外の列又は列の組合せが、外部キーを構成する場合は、必ず非ユニーク索引を作成する。」
と書かれているので、一意になる項目かどうかでユニーク索引を、外部キーかどうかで非ユニーク索引を作成する。

**<FontColor color="red">以下のように定義されているのに、構成列の決め方については一切記述がないので構成順の決め方は正しくない可能性があります。</FontColor>**
ページ 11 $>$ 1, テーブル定義 $>$ (4) $>$ $\textcircled{\scriptsize 4}$に
「各索引の構成列には、構成列の定義順に 1 からの連番を記入する。」
と書かれているので、構成列の番号は構成列の定義順に決めていく。

- 行員番号

  行員番号は主キーであるため、索引の種類と構成列に`P`を追加する。
  また、関係スキーマをみると構成列として一番前に存在するので、番号を`1`とする。

- 予定日

  主キーとなっており、また、構成列が 2 番目であるので、索引の種類と構成列の P 行が`2`となる。

- 開始時刻

  - データ型

    表 1 より時刻を扱っていることが分かるので、データ型は`TIME`となる。

  - NOT NULL

    主キーは NOT NULL 制約が存在するので NOT NULL は`Y`となる。

  - 格納長

    TIME 型は 3 バイトであり、NOT NULL 制約を指定するので、合わせて`3 + 0 = 3`バイトとなる。

  - 索引の種類と構成列

    主キーであり、構成列が前から 3 番目となっているので、索引の種類と構成列の P 行が`3`となる。

- 行番号

  - データ型

    表 1 を見ると行番号は 1 $\sim$ 999 番までしか取らないことが分かるので、SMALLINT で数値の範囲が収まるので、`SMALLINT`となる。

  - NOT NULL

    主キーは NOT NULL 制約が存在するので NOT NULL は`Y`となる。

  - 格納長

    SMALLINT は 2 バイトであり、NOT NULL 制約を指定するので、`2 + 0 = 2`バイトとなる。

  - 索引の種類と構成列

    主キーであり、構成列が前から 4 番目となっているので、索引の種類と構成列の P 行が`4`となる。

- 終了時刻

  - データ型

    表 1 より時刻を扱っていることが分かるので、データ型は`TIME`となる。

  - NOT NULL

    表 1 に「 $\sim$ "スケジュール"テーブルの場合は必須で、 $\sim$ 」と書かれているので、`Y`となる。

  - 格納長

    TIME 型は 3 バイトであり、NOT NULL 制約を指定するので、合わせて`3 + 0 = 3`バイトとなる。

  - 索引の種類と構成列

    主キーでも、一意に決まる項目でも、外部キーでもないので索引は特になし

- 行動種別

  - データ型

    表 1 を見ると 1 $\sim$ 5 の数字を''で囲われているので、文字列であることが分かるので、1 $\sim$ 5 を格納するための文字列の大きさは`CHAR(1)`で十分である。

  - NOT NULL

    表 1 に「 $\sim$ のいずれか」と書かれているので、`Y`となる。

  - 格納長

    CHAR 型は文字数でバイト数が決まり、今回は 1 文字で、NOT NULL 制約を指定するので、`1 + 0 = 1`バイトとなる。

  - 索引の種類と構成列

    主キーでも、一意に決まる項目でも、外部キーでもないので索引は特になし

- 行動内容

  - データ型

    表 1 を見ると全角文字であり、最大 1000 文字であることが分かるので、`NCHAR VARYING(1000)`となる。

  - NOT NULL

    表 1 に「 $\sim$ "スケジュール"テーブルの場合は任意である。」とあるので、`N`となる。

  - 格納長

    ページ 11 $>$ 1. テーブル定義 $>$ (3)に
    「 $\sim$ 可変長文字列の格納長は、表 1 から平均文字数が分かる場合はそれを基準に算出し、それ以外の場合は最大文字数の半分を基準に算出する。」
    と書かれており、表 1 には「平均文字数は 58 文字」と書かれている。`NCHAR VARYING`のバイト数は文字数*2 バイト + 制御情報の 4 バイトであり、
    NOT NULL 制約を指定しないので`58 * 2 + 4 + 1 = 121`バイトとなる。

  - 索引の種類と構成列

    主キーでも、一意に決まる項目でも、外部キーでもないので索引は特になし

- 支店コード

  - データ型

    表 1 に「4 桁の半角英数字」と書かれているので`CHAR(4)`となる。

  - NOT NULL

    表 1 の案件番号の欄を見ると「 $\sim$ "スケジュール"テーブルの支店コードと案件番号は、案件に関連する顧客との面談予定などを登録する場合にだけ設定する」
    と書かれているので、`N`となる。

  - 格納長

    CHAR 型は文字数でバイト数が決まり、今回は 4 文字で、NOT NULL 制約を指定しないので、`4 + 1 = 5`バイトとなる。

  - 索引の種類と構成列

    外部キーとなっているので、`NU`の索引を作成する必要がある。
    案件テーブルの主キーの一番前が支店コードとなっているため、構成順は`1`となる。

- 案件番号

  - データ型

    表 1 に「(1 $\sim$ 99,999,999)」と書かれており、この範囲に収まる数値は`INTEGER`型となる。

  - NOT NULL

    支店コードと同様で`N`となる。

  - 格納長

  INTEGER 型は 4 バイトであり、NOT NULL 制約を指定しないので、`4 + 1 = 5`バイトとなる。

  - 索引の種類と構成列

    外部キーであるので`NU`となり、案件テーブルの 2 番目に書かれていることから構成順は`2`となる。

まとめると、

|    列名    |      データ型       | NOT<br/>NULL | 格納長<br/>(バイト) | 索引の種類と構成列<br/>1 | <br/>2 | <br/>3 |
| :--------: | :-----------------: | :----------: | :-----------------: | :----------------------: | :----: | :----: |
|    ---     |         ---         |     ---      |         ---         |            P             |   NU   |        |
|  行員番号  |         ---         |     ---      |         ---         |            1             |        |        |
|   予定日   |         ---         |     ---      |         ---         |            2             |        |        |
|  開始時刻  |        TIME         |      Y       |          3          |            3             |        |        |
|   行番号   |      SMALLINT       |      Y       |          2          |            4             |        |        |
|  終了時刻  |        TIME         |      Y       |          3          |                          |        |        |
|  行動種別  |       CHAR(1)       |      Y       |          1          |                          |        |        |
|  行動内容  | NCHAR VARYING(1000) |      N       |         121         |                          |        |        |
| 支店コード |       CHAR(4)       |      N       |          5          |                          |   1    |        |
|  案件番号  |       INTEGER       |      N       |          5          |                          |   2    |        |

- a

  支店コードと案件番号を主キーとして持っているテーブルが案件テーブルであるので、外部キーは案件テーブルを指していることが分かるので、

  ```sql
  FOREIGN KEY (支店コード, 案件番号) REFERENCES 案件 (支店コード, 案件番号)
  ```

  となる。

- b

  表 1 の開始時刻の欄を見ると「終了時刻は開始時刻よりも後でなければならない」と書かれているので、

  ```sql
  CHECK 開始時刻 < 終了時刻
  ```

  となる。

- c

  表 1 の行動種別の欄を見ると「 $\sim$ のいずれか」と書かれているので、表に書かれているものだけしか入力しないことが分かるので、

  ```sql
  CHECK 行動種別 IN ('1', '2', '3', '4', '5')
  ```

  となる。

##### (2)

- d

  スケジュールテーブルの格納長を全て足し合わせるだけで良いので`4 + 4 + 3 + 2 + 3 + 1 + 121 + 5 + 5 = 148`バイトとなる。

- e

  問題文に「空き領域率は 10 $%$ とする。」と書かれているので、最大で使用できるページサイズは`4,000 * 0.9 = 3,600`バイトとなる。
  1 データページ当たりの平均行数なので、1 行で格納される 148 バイトで割ることで 1 ページ当たりの平均行数を求めることができるので、
  `3,600 / 148 = 24.32`となるので、`24`行となる。

- f

  必要なデータページ数は見積もり行数を 1 ページ当たりの平均行数で割れば良いので、
  `1,200,000 / 24 = 50,000`となる。

- g

  データ所要量は必要なページ数*ページサイズで求めることができるので、
  `50,000 * 4,000 = 200,000,000`となり、桁が百万単位なので、`200`となる。

##### (3)

- h

  暗号化するために AP を用いており、A では AP を利用してのデータの持ち出しとなっているので、暗号化したとしても効果を発揮しないので $\times$ となる。

- i

  バックアップしたデータは暗号化されているので、持ち出されても復号キーがないとデータを読み取る(理解)できないので、対策としては有効であると考えられるので $\circ$ となる。

- 有効でない場合

  C の状況はデータが盗まれた場合について考えています。基本的には暗号化しているため、AP を通さずにデータが盗まれたとしてもデータは暗号化されているので問題ない。
  しかし、AP の複合関数と複合の鍵が盗まれていた場合、AP を通さなくてもデータを復元できてしまうことが分かるので、

  `複合関数名と鍵を盗まれた場合`

  となる。

- トレードオフの事象

  暗号化することで、ページ 12 $>$ 3. 個人情報保護の強化 に　
  「 $\sim$ 各列のデータ型、データ長の定義を変更する。」と書かれており、データが変わってしまうことが分かる。
  顧客名は表 3 にもあるように非ユニーク索引が作成されているので、この暗号化により使用ができなくなるので、

  `顧客名による検索に索引を使用できないので性能が劣化する`

  となる。

#### 設問 2

##### (1)

- j

  1 番の段には外部キーを持っていないものを選択することで参照制約に反しないテーブルを選択できるので

  > 商品種別

  となる。

- k

  1 段目で選択したテーブルは既にテーブルを移動済みであるので、1 段目にあるテーブルの主キーを外部キーとしてもつテーブルも移動が可能となる。
  1 段目のテーブルの主キー以外の外部キーを持っていないテーブルを選択することができるので、

  > 運用商品

  となる。

- l

  3 段目までに選択したテーブルは既にテーブルを移動済みであるので、3 段目までにあるテーブルの主キーを外部キーとしてもつテーブルも移動が可能となる。
  3 段目までのテーブルの主キー以外の外部キーを持っていないテーブルを選択することができるので、

  > 顧客基本

  となる。

- m

  4 段目までに選択したテーブルは既にテーブルを移動済みであるので、4 段目までにあるテーブルの主キーを外部キーとしてもつテーブルも移動が可能となる。
  4 段目までのテーブルの主キー以外の外部キーを持っていないテーブルを選択することができるので、

  > 顧客詳細, 顧客口座

  となる。

- n

  5 段目までに選択したテーブルは既にテーブルを移動済みであるので、5 段目までにあるテーブルの主キーを外部キーとしてもつテーブルも移動が可能となる。
  5 段目までのテーブルの主キー以外の外部キーを持っていないテーブルを選択することができるので、

  > 取引, コンタクト履歴

  となる。
