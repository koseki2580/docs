---
title: 平成30年
sidebar_label: 平成30年
draft: true
toc_max_heading_level: 4
tags: [データベース, 資格, データベーススペシャリスト, 午後1, 午後2]
---

```mdx-code-block
import UnderLine from "@site/src/components/Custom/UnderLine"
```

以下の写真は全て実際の問題よりスクリーンショットで取得したものを表示させています。

## 午後 1

出典 : 平成 30 年度 春期 データベーススペシャリスト試験　午後 1

[問題](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2018h30_1/2018h30h_db_pm1_qs.pdf)

[解答](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2018h30_1/2018h30h_db_pm1_ans.pdf)

問題と解答は上記からダウンロードすることができます。

## 午後 2

出典 : 平成 30 年度 春期 データベーススペシャリスト試験　午後 2

[問題](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2018h30_1/2018h30h_db_pm2_qs.pdf)

[解答](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/mondai_kaitou_2018h30_1/2018h30h_db_pm2_ans.pdf)

問題と解答は上記からダウンロードすることができます。

### 設問 1

#### (1)

- 図 1 にある `ア`, `イ`に入る列名を答える問題

![午後2 設問1 図1](/img/png/Database/database-specialist/H30/2-figure-1.png "午後2 設問1 図1")

問題の 7 ページ目に`仮払い金精算`について書かれている。

![午後2 ページ7 (3)](/img/png/Database/database-specialist/H30/2-1-1-1.png "午後2 ページ7 (3)")

こちらを見ると、

「申請には`社員番号, 申請理由, 仮払金額, 精算期限`を記載し、未精算の仮払金は`仮払金残高`として記録する」と書かれている。
ここから、仮払金申請には最低でも`社員番号, 申請理由, 仮払金額, 精算期限, 仮払金残高`が記録されていることがわかる。

④ には仮払金精算について書かれており、「`一つの仮払いに対する精算が複数の日に分かれる`ことがある」から

{仮払金申請} $\rightarrow$ {仮払金精算}

であることが分かる。

また、「精算時には、`精算日ごと`に`精算金額を記録`し、」から仮払金精算には`精算金額`が保持されていることがわかる。
さらに、`精算日ごとに`とあり、`申請番号`と`精算日`が分かれば、仮払金精算が一意に定まることがわかる。

ここまでをまとめると

|                |                                                                                          |
| :------------: | :--------------------------------------------------------------------------------------: |
| ア(仮払金申請) |                              仮払金額, 精算期限, 仮払金残高                              |
| イ(仮払金精算) | <UnderLine px="2" >申請番号</UnderLine>, <UnderLine px="2" >精算日</UnderLine>, 精算金額 |

申請についてはさらに、7 ページ目の`3. 申請・精算の流れ`で説明されている。

![午後2 ページ7 3](/img/png/Database/database-specialist/H30/2-1-1-2.png "午後2 ページ7 3")
![午後2 ページ8 続き](/img/png/Database/database-specialist/H30/2-1-1-3.png "午後2 ページ8 続き")

このページの(2)の ① に「申請に`上司承認日`を記録して庶務担当者に回付する。」とあり、② では「問題がなければ、申請に`精算日`を記録する」とある。
ここから、仮払金申請には`上司承認日, 精算日`の情報が存在していることがわかる。

② ではさらに、「仮払金の申請は事務センタに回付する」とあり、事務センタでも何らかのデータを記録する可能性があることが分かる。
(3)の ③ では「仮払金は、申請を基に一定額の支払を行い、申請に`支払実行日`を記録する」と記載されていることから
仮払金申請には`支払実行日`の情報が存在していることがわかる。

仮払金申請・仮払金精算について書かれているのは以上なので、これらを全てまとめると以下のようになる。

|                |                                                                                          |
| :------------: | :--------------------------------------------------------------------------------------: |
| ア(仮払金申請) |              仮払金額, 精算期限, 仮払金残高, 上司承認日, 精算日, 支払実行日              |
| イ(仮払金精算) | <UnderLine px="2" >申請番号</UnderLine>, <UnderLine px="2" >精算日</UnderLine>, 精算金額 |

#### (2)

- 表 6 の太枠を埋める問題

![午後2 表6](/img/png/Database/database-specialist/H30/2-1-1-4.png "午後2 表6")

この表を埋める上で必要な情報は以下の表 1, 表 5 が必要です。

表 5 では型の説明であったり、バイトサイズについて記載され、
表 1 ではどんな情報(value)が入るのかが記載されている。

![午後2 表5](/img/png/Database/database-specialist/H30/2-1-1-5.png "午後2 表5")

![午後2 表1](/img/png/Database/database-specialist/H30/2-1-1-6.png "午後2 表1")

また、ページ 12-13 には設定する型の決定基準が記載されている。(長いのでスクショは省略)

各`データ型, NOT NULL, 格納長`を考えてから`索引の種類と構成列`について考えていく。

ページ 13 > 1. テーブル定義 > (1) > ③ にある
「① 及び ② どちらの場合も、列の値の取り得る範囲に従って、格納領域の長さが最小になるデータ型を選択する」を前提に考えていく。

- 外貨金額

  データ型は「0.01 ~ 9,999,999,999.99 を指定」であることと ページ 13 > 1. テーブル定義 > (1) > ② に
  「数値の列が整数である場合は、取り得る値の範囲に応じて、SMALLINT 又は INTEGER を選択する。それ以外の場合は DECIMAL を選択する。」
  と記載されていることから、`DECIMAL型`となる。精度は最大で 12 桁となるので`m = 12`であり、位取りは少数下２桁であることから
  `n = 2`である。

  NOT NULL は「申請登録時の指定は任意である」と記載されているので`No`となる。

  格納長は DECIMAL 型は「m $\div$ 2 + 1 の少数部を切り捨てバイト数の領域を格納される」であるので、`12 / 2 + 1 = 7`となる。
  しかし、ページ 12 > 2. テーブル > (1) に「NOT NULL 制約を指定しない列には、NULL か否かを表す 1 バイトのフラグを付加される。」
  とあるので、`7 + 1 = 8`となり、`8`バイトとなる。

- 支払い先

  データ型は「全角文字 100 字以内、平均文字数は 20 文字」であることとページ 13 > 1. テーブル定義 > (1) > ① に
  「文字列型の列が全角文字の場合は、NCHAR 又は NCHAR VARYING を選択し、それ以外の場合は CHAR 又は CHAE VARCHAR を選択する。」
  と記載されていることから、`NCHAR VARYING型`となる。最大文字数は`100`と明記されているので、`NCHAR VARYING(100)`となる。

  NOT NULL は「申請登録時の指定は経費支払依頼では必須、立替経費精算では任意である。」と記載されているので`Yes`にしてしまうと、
  立替経費精算時にも必要になってしまい、問題文と矛盾が生じてしまう。従って`No`となる。

  格納長は「値の文字数 $\times$ 2 バイトの領域に格納され、4 バイトの制御情報が付加される」であることと
  ページ 13 > 1. テーブル定義 > (3) にある「可変長文字列の格納長は、表 1 から平均文字数が分かる場合はそれを基準に算出し、それ以外の場合は最大文字数の半分を基準に算出する。」
  と記載されていることから、`20 * 2 + 4 = 44`となり、さらに NOT NULL が`No`なので`44 + 1 = 45`となる。

- 支払目的

  データ型は「全角文字 1000 字以内、平均文字数は 64 文字」であることとページ 13 > 1. テーブル定義 > (1) > ① より
  `NCHAR VARYING型`となる。最大文字数は`1000`と明記されているので、`NCHAR VARYING(1000)`となる。

  NOT NULL は「申請登録時の指定は必須である。」と記載されているので`Yes`となる。

  格納長は`64 * 2 + 4 = 132`バイトとなる。

- 支払予定日

  データ型は「支払の基になった支払伝票の支払予定日に記録する。」であることとページ 13 > 1. テーブル定義 > (1) > ④ に
  「日付の列は、DATE を選択する。」と記載されていることから、`DATE型`となる。

  NOT NULL は「支払完了時に、支払の基になった支払伝票の支払予定日に記録する。」と記載されているので`No`となる。

  格納長は、「0001-01-01 ~ 9999-12-31 の範囲内の日付。4 バイトの領域に格納される。」と記載されていることから、`4`となり、さらに NOT NULL が`No`なので`4 + 1 = 5`となる。

- 支払番号

  データ型は「支払の基になった支払伝票の支払番号(1~99,999)を記録する。」であることとページ 13 > 1. テーブル定義 > (1) > ② より`INTEGER型`となる。

  NOT NULL は「支払完了時に、支払の基になった支払伝票の支払番号(1~99,999)を記録する。」と記載されているので`No`となる。

  格納長は「-2,147,483,648 ~ 2,147,483,647 の範囲内の整数。4 バイトの領域に格納される。」と記載されていることから、`4`となり、さらに NOT NULL が`No`なので`4 + 1 = 5`となる。

ここまでをまとめると以下になる。

|    列名    |     　データ型      | NOT NULL | 格納長(バイト) |
| :--------: | :-----------------: | :------: | :------------: |
|  外貨金額  |    DECIMAL(12,2)    |    N     |       8        |
|   支払先   | NCHAR VARYING(100)  |    N     |       45       |
|  支払目的  | NCHAR VARYING(1000) |    Y     |      132       |
| 支払予定日 |        DATE         |    N     |       5        |
|  支払番号  |       INTEGER       |    N     |       5        |

次に索引について考える。これはページ 13 > 1. テーブル定義 > (4)に記載されている。
ここに書かれてる内容をまとめると

- P(主キーの索引) : 主キー
- U(ユニーク索引) : 主キー以外で値が一意となる列又は列の組み合わせ
- NU(非ユニーク索引) : P, U 以外の列又は列の組み合わせで外部キー

となる。これらより、`外貨金額, 支払先, 支払目的`は非キーであるため、索引を何もつけない。
しかし、`支払予定日, 支払番号`は外部キーとなっているため、U, NU の索引をつけることになる。

ページ 8 > (3) > ② に「一般経費は、`申請ごと`に支払伝票を作成し、`申請に支払伝票の支払予定日及び支払番号を記録`する。」と記載さており、
申請ごとに一意の`支払予定日, 支払番号`が記録されていることが分かる。そのため、`支払予定日, 支払番号`は`U`となり、最終的な解答は以下のようになる

|    列名    |     　データ型      | NOT NULL | 格納長(バイト) | 索引の種類と構成列 |
| :--------: | :-----------------: | :------: | :------------: | :----------------: |
|  外貨金額  |    DECIMAL(12,2)    |    N     |       8        |                    |
|   支払先   | NCHAR VARYING(100)  |    N     |       45       |                    |
|  支払目的  | NCHAR VARYING(1000) |    Y     |      132       |                    |
| 支払予定日 |        DATE         |    N     |       5        |        U(1)        |
|  支払番号  |       INTEGER       |    N     |       5        |        U(2)        |

#### (3)
