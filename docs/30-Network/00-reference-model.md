---
title: 参照モデル
sidebar_label: 参照モデル
draft: false
toc_max_heading_level: 5
tags: [ネットワーク]
---

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FontColor from "@site/src/components/Custom/FontColor"
import SplitParagraph from "@site/src/components/Custom/SplitParagraph"
import Paragraph from "@site/src/components/Custom/Paragraph"
```

## 参照モデル

参照モデルとはネットワークの通信構造を表したモデルであり、OSI参照モデルとTCP/IP参照モデルの2種類が存在する。2024年現在ではプログラムの実装はTCP/IP参照モデルが主に使用されている。
しかし、OSI参照モデルはネットワークの基本的な概念をうまく分割し、学習するには向いているため、2024年現在でも教育の面で使用されている。

ネットワーク構造を複数の層に分けることで、それぞれの層は自分の層が担当する処理のみ行い、そのほかの処理は別の層に任せる形をとる。
これにより、層ごとにプロトコル(規約・ルール)を自由に組み合わせることができ、様々なネットワーク通信を実現することが可能となる。

### OSI参照モデル

ネットワーク構造を7層に分けて考える参照モデルである。構造を7層と細かく分けてしまったため、扱うことが難しくなってしまいこの参照モデルを使用した実装は行われなくなった。

1. 物理層

    デジタルのデータを物理信号(光や電波)に変換し、物理的な送受信を担当
2. データリンク層

    同じネットワーク内での接続を担当 (誤り検出や再送制御などのエラー管理も行う)
3. ネットワーク層

    異なるネットワークとの接続を担当
4. トランスポート層

    通信の制御を担当
5. セッション層

    アプリケーション層のデータをやり取りするためのセッションの管理を担当(接続の手順の管理)
6. プレゼンテーション層

    アプリケーション層で扱うデータの表現を担当
7. アプリケーション層

    個々のアプリケーションを担当

の7層で構成されている。

![OSI参照モデル](/img/svg/Network/reference-model/reference-model-1.drawio.svg "OSI参照モデル")

### TCP/IP参照モデル

標準的に用いられている参照モデルであり、全4層のネットワーク構造をとる。

1. ネットワークインターフェイス層

    同じネットワーク内での接続を担当
2. インターネット層

    異なるネットワーク間での接続を担当
3. トランスポート層

    アプリケーションの接続制御を担当
4. アプリケーション層

    アプリケーションの提供を担当
の4層で構成されている。

それぞれの層で使用されるプロトコルには以下の様なものがある。

1. ネットワークインターフェイス層

    ARP, RARP
2. インターネット層

    IPv4, IPv6, ICMP
3. トランスポート層

    TCP, UDP, QUIC
4. アプリケーション層

    HTTP, POP3, SMTP

![TCP/IP参照モデル](/img/svg/Network/reference-model/reference-model-2.drawio.svg "TCP/IP参照モデル")

TCP/IP参照モデルとOSI参照モデルは次のように対応付けすることが可能である。

![OSI参照モデル - TCP/IP参照モデル](/img/svg/Network/reference-model/reference-model-3.drawio.svg "OSI参照モデル - TCP/IP参照モデル")

## カプセル化

データの通信は、参照モデルに基づいて階層化されたシステムによって行われる。通信の際にデータは、上位層から下位層へと順次**カプセル化**され、送信されることで目的地に届けられ、受信側では下位層から上位層へと順次解凍される。

具体的には、送信側でデータはアプリケーション層から始まり、上位から順にトランスポート層、インターネット層、そして最終的にネットワークインターフェイス層へと渡され、各層では、上位層でのデータに付加されたヘッダーやトレイラーが付け加えられ、その層で必要な情報が挿入される。
たとえば、トランスポート層では送信元と送信先のポート番号が付加され、インターネット層では送信元と送信先のIPアドレスが追加される。
そして、ネットワークインターフェイス層では、物理的なデバイス（ネットワークカードなど）に関連する情報が追加される。

これにより、データは下位層に進むにつれてより具体的な形式に変換され、ネットワークを横断するために必要な情報が追加される。そして、通信路を介してデータは送信され、受信側では逆のプロセスが行われる。つまり、受信側ではデータがネットワークインターフェイス層から始まり、上位層に向かって解凍されていきます。

このように、データの通信は参照モデルに基づいて階層化されたプロセスであり、各層でのカプセル化と解凍によって効率的かつ正確にデータが送受信される。

![カプセル化](/img/svg/Network/reference-model/reference-model-4.drawio.svg "カプセル化")
